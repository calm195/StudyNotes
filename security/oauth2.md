# OAuth 2.0

OAuth(Open Authorization) 2.0是一种用户资源授权协议。

## 角色

OAuth 2.0定义了四种角色：

- **资源所有者**：通常是用户，拥有受保护资源。
- **资源服务器**：存储资源所有者的受保护资源。
- **客户端**：请求访问资源服务器上受保护资源的应用程序。
- **授权服务器**：验证资源所有者身份并颁发访问令牌的服务器。

术语：

- **访问令牌**：客户端访问资源服务器的凭证。
- **刷新令牌**：用于获取新的访问令牌的凭证，通常在访问令牌过期后使用。

## 流程

OAuth 2.0的授权流程通常包括以下步骤：

1. **用户请求资源服务器**：客户端应用程序请求访问资源服务器上的受保护资源。
2. **重定向到授权服务器**：资源服务器将请求重定向到授权服务器，要求用户进行身份验证。
3. **用户身份验证**：用户在授权服务器上进行身份验证，并同意授权客户端访问其资源。
4. **授权码颁发**：授权服务器向客户端颁发授权码
5. **访问令牌请求**：客户端使用授权码向授权服务器请求访问令牌。
6. **访问令牌颁发**：授权服务器验证授权码并颁发访问令牌。
7. **访问资源**：客户端使用访问令牌访问资源服务器上的受保护资源 。
8. **刷新令牌**：如果访问令牌过期，客户端可以使用刷新令牌向授权服务器请求新的访问令牌。
9. **访问令牌更新**：授权服务器验证刷新令牌并颁发新的访问令牌。

## 授权类型

OAuth 2.0定义了四种授权类型：

1. **授权码授权**：适用于Web应用程序，用户通过浏览器重定向到授权服务器进行身份验证，获取授权码后再交换访问令牌。
2. **隐式授权**：适用于单页应用程序，直接在浏览器中获取访问令牌，不需要授权码。
3. **资源所有者密码凭据授权**：适用于受信任的应用程序，用户直接提供用户名和密码，客户端使用这些凭据获取访问令牌。
4. **客户端凭据授权**：适用于机器对机器通信，客户端使用自己的凭据（如客户端ID和密钥）获取访问令牌。
